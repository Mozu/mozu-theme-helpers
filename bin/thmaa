#!/usr/bin/env node

var color = require('colors'),
    argv = require('minimist')(process.argv.slice(2), {
      alias: {
        'friendly-name': 'friendlyName'
      }
    });
    
if (!argv._[0]) argv._[0] = 'help';

function die(err) {
  if (argv.debug) {
    throw err;
  } else {
    console.error('  ' + (err.message || err.toString()).red + "\n");
    process.exit(err.code || 1);
  }
}

var logger = require('../')(argv._[0], {
  options: argv,
  _args: argv._.slice(1),
}, function(err) {
  if (err) {
    die(err);
  }
});

logger.on('info', function(msg) {
  console.log('  ' + msg + "\n");
});

logger.on('warn', function(msg) {
  console.warn(('  ' + msg + "\n").yellow);
});